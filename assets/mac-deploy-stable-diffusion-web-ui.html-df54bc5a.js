import{_ as r,r as o,o as l,c,a as e,b as i,d as a,f as d,w as g,e as t}from"./app-2c72f79b.js";const p={},f=e("h1",{id:"mac-本地部署超火的-ai-绘画-stable-diffusion-webui",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#mac-本地部署超火的-ai-绘画-stable-diffusion-webui","aria-hidden":"true"},"#"),i(" Mac 本地部署超火的 AI 绘画 stable-diffusion-webui")],-1),u={href:"https://github.com/AUTOMATIC1111/stable-diffusion-webui",target:"_blank",rel:"noopener noreferrer"},h={href:"https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Installation-on-Apple-Silicon",target:"_blank",rel:"noopener noreferrer"},b={class:"hint-container tip"},m=e("p",{class:"hint-container-title"},"提示",-1),_={href:"https://getimg.ai/ref/4BPOzb5hx",target:"_blank",rel:"noopener noreferrer"},v={class:"hint-container tip"},x=e("p",{class:"hint-container-title"},"提示",-1),k=e("h2",{id:"安装-homebrew",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#安装-homebrew","aria-hidden":"true"},"#"),i(" 安装 Homebrew")],-1),w=e("div",{class:"hint-container tip"},[e("p",{class:"hint-container-title"},"提示"),e("p",null,"以下安装过程中最好开启魔法上网，不然有些依赖会因为网络原因无法安装或其他莫名其妙的报错问题。")],-1),y={href:"https://brew.sh/index_zh-cn",target:"_blank",rel:"noopener noreferrer"},z=t(`<div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>/bin/bash <span class="token parameter variable">-c</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">curl</span> <span class="token parameter variable">-fsSL</span> https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh<span class="token variable">)</span></span>&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>不知道是否有安装的可以在终端中使用下面的命令查看：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>brew <span class="token parameter variable">-v</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>如果已安装，会显示 Homebrew 的版本号。</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>Homebrew 3.6.20
Homebrew/homebrew-core (git revision 512bc2f6829; last commit 2023-01-20)
Homebrew/homebrew-cask (git revision 0f67640754; last commit 2023-01-20)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="安装所需软件" tabindex="-1"><a class="header-anchor" href="#安装所需软件" aria-hidden="true">#</a> 安装所需软件</h2><p>使用 Homebrew 安装一些必须的软件，在终端中使用下面的命令进行一键安装，等待安装完成。</p><div class="hint-container tip"><p class="hint-container-title">提示</p><p>注意<code>Python</code>使用的是<code>3.10</code>的版本，<code>Python</code>安装完成后需要设置环境变量。</p></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>brew <span class="token function">install</span> cmake protobuf rust python@3.10 <span class="token function">git</span> <span class="token function">wget</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="clone-下载代码" tabindex="-1"><a class="header-anchor" href="#clone-下载代码" aria-hidden="true">#</a> Clone 下载代码</h2><p>找一个存放代码的位置，使用下面的命令将 stable-diffusion-webui 的仓库代码 Clone 下来。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">git</span> clone https://github.com/AUTOMATIC1111/stable-diffusion-webui
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="下载-sd-模型" tabindex="-1"><a class="header-anchor" href="#下载-sd-模型" aria-hidden="true">#</a> 下载 SD 模型</h2>`,13),C=e("code",null,".ckpt",-1),A=e("code",null,".safetensors",-1),I={href:"https://huggingface.co/",target:"_blank",rel:"noopener noreferrer"},S={href:"https://huggingface.co/CompVis/stable-diffusion-v-1-4-original",target:"_blank",rel:"noopener noreferrer"},H={href:"https://huggingface.co/CompVis/stable-diffusion-v-1-4-original/resolve/main/sd-v1-4.ckpt",target:"_blank",rel:"noopener noreferrer"},L={href:"https://huggingface.co/runwayml/stable-diffusion-v1-5",target:"_blank",rel:"noopener noreferrer"},N={href:"https://huggingface.co/runwayml/stable-diffusion-v1-5/resolve/main/v1-5-pruned-emaonly.ckpt",target:"_blank",rel:"noopener noreferrer"},T={href:"https://huggingface.co/runwayml/stable-diffusion-inpainting",target:"_blank",rel:"noopener noreferrer"},D={href:"https://huggingface.co/runwayml/stable-diffusion-inpainting/resolve/main/sd-v1-5-inpainting.ckpt",target:"_blank",rel:"noopener noreferrer"},M={href:"https://huggingface.co/stabilityai/stable-diffusion-2",target:"_blank",rel:"noopener noreferrer"},V={href:"https://huggingface.co/stabilityai/stable-diffusion-2/resolve/main/768-v-ema.ckpt",target:"_blank",rel:"noopener noreferrer"},j={href:"https://huggingface.co/stabilityai/stable-diffusion-2-1",target:"_blank",rel:"noopener noreferrer"},U={href:"https://huggingface.co/stabilityai/stable-diffusion-2-1/resolve/main/v2-1_768-ema-pruned.ckpt",target:"_blank",rel:"noopener noreferrer"},E={href:"https://civitai.com/",target:"_blank",rel:"noopener noreferrer"},O=e("figure",null,[e("img",{src:"https://image.liubing.me/i/2023/02/26/63fb29c89a222.png",alt:"image",tabindex:"0",loading:"lazy"}),e("figcaption",null,"image")],-1),P=e("p",null,[i("可以通过检索搜索模型类型为 "),e("code",null,"Checkpoint"),i("。")],-1),W=e("figure",null,[e("img",{src:"https://image.liubing.me/i/2023/02/26/63fb2ae71c2e0.png",alt:"image",tabindex:"0",loading:"lazy"}),e("figcaption",null,"image")],-1),B={href:"https://civitai.com/models/6424/chilloutmix",target:"_blank",rel:"noopener noreferrer"},q=e("code",null,"Download Latest",-1),G=t(`<figure><img src="https://image.liubing.me/i/2023/02/26/63fb2b86d1154.png" alt="image" tabindex="0" loading="lazy"><figcaption>image</figcaption></figure><p>由于是<code>SafeTensor</code>类型的模型，所以下载的文件后缀为<code>.safetensors</code>，下载完成后，将该模型文件复制到下面的 <code>Stable-diffusion</code> 目录中，<code>stable-diffusion-webui</code> 为上面 Clone 下来的代码。</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>stable-diffusion-webui/models/Stable-diffusion
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="运行启动" tabindex="-1"><a class="header-anchor" href="#运行启动" aria-hidden="true">#</a> 运行启动</h2><p>有了模型后就能通过命令启动程序了，使用终端进入到<code>stable-diffusion-webui</code>目录，然后运行下面的命令启动。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>./webui.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>此时程序会自动安装一些项目依赖，首次启动会耗时较长，需要耐心等待依赖安装完成。</p><figure><img src="https://image.liubing.me/i/2023/02/26/63fb2d15ca24b.png" alt="image" tabindex="0" loading="lazy"><figcaption>image</figcaption></figure><p>依赖安装完成在最后启动的阶段缺报了个错，如下所示：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>When localhost is not accessible, a shareable link must be created. Please set share=True.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://image.liubing.me/i/2023/02/26/63fb2e13d2780.png" alt="image" tabindex="0" loading="lazy"><figcaption>image</figcaption></figure><p>Google 搜索一番后才知道是我电脑的终端设置了代理导致的该问题，需要将一个<code>share</code>参数设置为<code>True</code>。</p><p>在项目代码里面搜索了下<code>share</code>关键词，发现只需要将项目跟目录的<code>webui.py</code>文件中<code>share</code>参数设置为<code>True</code>即可。</p><figure><img src="https://image.liubing.me/i/2023/02/26/63fb2eabd2cd0.png" alt="image" tabindex="0" loading="lazy"><figcaption>image</figcaption></figure><p>修改完成后重新执行<code>./webui.sh</code>命令运行项目，最后顺利启动成功。</p><figure><img src="https://image.liubing.me/i/2023/02/26/63fb2f5670ecd.png" alt="image" tabindex="0" loading="lazy"><figcaption>image</figcaption></figure><p>这时候访问提示的<code>http://127.0.0.1:7860/</code>即可访问项目了。</p><figure><img src="https://image.liubing.me/i/2023/02/26/63fb2fa0c736a.png" alt="image" tabindex="0" loading="lazy"><figcaption>image</figcaption></figure><h2 id="设置中文" tabindex="-1"><a class="header-anchor" href="#设置中文" aria-hidden="true">#</a> 设置中文</h2><p>此时页面都还是全英文的，看的也稀里糊涂，接下来设置下中文的显示。</p><p>点开<code>Extensions</code>菜单，找到<code>Available</code>中的<code>localization</code>，默认是勾选上的，将勾选去掉，然后点击<code>Load from</code>按钮。</p><figure><img src="https://image.liubing.me/i/2023/02/26/63fb306479afd.png" alt="image" tabindex="0" loading="lazy"><figcaption>image</figcaption></figure><p>此时会出现很多的可安装选项，一直往下拉或者搜索<code>zh_CN</code>找到<code>zh_CN Localization</code>，点击右侧的<code>Install</code>按钮安装。</p><figure><img src="https://image.liubing.me/i/2023/02/26/63fb312d101eb.png" alt="image" tabindex="0" loading="lazy"><figcaption>image</figcaption></figure><p>安装完成后点击上面的<code>Settings</code>菜单进入设置页面。</p><figure><img src="https://image.liubing.me/i/2023/02/26/63fb319871cb4.png" alt="image" tabindex="0" loading="lazy"><figcaption>image</figcaption></figure><p>点击左侧<code>User interface</code>，往下拉，找到<code>Localization (requires restart)</code>，点击选择刚下载的<code>zh_CN</code>语言，如果看不到<code>zh_CN</code>，点击右侧的刷新按钮。</p><figure><img src="https://image.liubing.me/i/2023/02/26/63fb321b3be87.png" alt="image" tabindex="0" loading="lazy"><figcaption>image</figcaption></figure><p>选择完<code>zh_CN</code>后页面拉到最上面点击<code>Apply settings</code>按钮保存设置，最后点击<code>Reload Ul</code>按钮。</p><figure><img src="https://image.liubing.me/i/2023/02/26/63fb32af949bf.png" alt="image" tabindex="0" loading="lazy"><figcaption>image</figcaption></figure><p>此时页面会重新加载，大家就能看到熟悉的中文了。</p><figure><img src="https://image.liubing.me/i/2023/02/26/63fb32c6394ad.png" alt="image" tabindex="0" loading="lazy"><figcaption>image</figcaption></figure><h2 id="基本使用" tabindex="-1"><a class="header-anchor" href="#基本使用" aria-hidden="true">#</a> 基本使用</h2>`,33),R={href:"https://civitai.com/",target:"_blank",rel:"noopener noreferrer"},F=t('<figure><img src="https://image.liubing.me/i/2023/02/26/63fb549130850.png" alt="image" tabindex="0" loading="lazy"><figcaption>image</figcaption></figure><h2 id="福利" tabindex="-1"><a class="header-anchor" href="#福利" aria-hidden="true">#</a> 福利</h2><p>最后附上几张 AI 绘制的福利图，不难看出 AI 会手指头的绘制还是会出现一些莫名其妙的问题 😂</p><figure><img src="https://image.liubing.me/i/2023/02/26/63fb51b64a5ac.jpeg" alt="image" tabindex="0" loading="lazy"><figcaption>image</figcaption></figure><figure><img src="https://image.liubing.me/i/2023/02/26/63fb520e2295b.jpeg" alt="image" tabindex="0" loading="lazy"><figcaption>image</figcaption></figure><figure><img src="https://image.liubing.me/i/2023/02/26/63fb521da99ac.jpeg" alt="image" tabindex="0" loading="lazy"><figcaption>image</figcaption></figure><figure><img src="https://image.liubing.me/i/2023/02/26/63fb5230a8128.jpeg" alt="image" tabindex="0" loading="lazy"><figcaption>image</figcaption></figure><figure><img src="https://image.liubing.me/i/2023/02/26/63fb5243d3674.jpeg" alt="image" tabindex="0" loading="lazy"><figcaption>image</figcaption></figure><figure><img src="https://image.liubing.me/i/2023/02/26/63fb525234ae0.jpeg" alt="image" tabindex="0" loading="lazy"><figcaption>image</figcaption></figure>',9);function $(J,K){const n=o("ExternalLinkIcon"),s=o("RouterLink");return l(),c("div",null,[f,e("p",null,[i("日常抖音上经常刷到 AI 绘画的内容，觉得挺有趣的，寻思着能不能自己部署一个，网上 Google 了下找到了这个超火的 AI 绘画开源的程序"),e("a",u,[i("stable-diffusion-webui"),a(n)]),i("，看了下基本的介绍，支持 Windows、Linux、Mac，由于本人使用的 Mac，记录下 Mac 的本地部署教程，整体教程参考 Wiki 中的"),e("a",h,[i("Installation on Apple Silicon"),a(n)])]),d(" more "),e("div",b,[m,e("p",null,[i("如果你懒得搭建也可以使用"),e("a",_,[i("在线服务"),a(n)]),i("，需要谷歌账号登录，初次登录会有 100 个点的额度，每生成一张图消耗一个点额度，每个月会重置。当然你可以发挥钞能力获取更多的额度。")])]),e("div",v,[x,e("p",null,[i("博主自己整理了一个 AI 相关的导航、包含编程、绘画、视频等等，有兴趣的可以"),a(s,{to:"/nav/ai/hot.html"},{default:g(()=>[i("点击查看")]),_:1}),i("。")])]),k,w,e("p",null,[e("a",y,[i("Homebrew"),a(n)]),i(" 是 macOS（或 Linux）缺失的软件包的管理器，Mac 上经常使用 Homebrew 安装一些软件，相信用 Mac 的同学应该都装了 Homebrew，没有安装的参考官网的一键安装命令。")]),z,e("p",null,[i("代码已经 Clone 下来后，实际运行还需要下载模型，一般模型文件后缀为"),C,i("或者"),A,i("，文件大小一般都上 G 的大小。我们可以参照 Wiki 说明上的链接在"),e("a",I,[i("Hugging Face"),a(n)]),i("上进行下载，这里一般下载 1.4 或者 1.5 版本的就行。")]),e("ul",null,[e("li",null,[e("a",S,[i("Stable DIffusion 1.4"),a(n)]),i(" ("),e("a",H,[i("sd-v1-4.ckpt"),a(n)]),i(")")]),e("li",null,[e("a",L,[i("Stable Diffusion 1.5"),a(n)]),i(" ("),e("a",N,[i("v1-5-pruned-emaonly.ckpt"),a(n)]),i(")")]),e("li",null,[e("a",T,[i("Stable Diffusion 1.5 Inpainting"),a(n)]),i(" ("),e("a",D,[i("sd-v1-5-inpainting.ckpt"),a(n)]),i(")")]),e("li",null,[e("a",M,[i("Stable Diffusion 2.0"),a(n)]),i(" ("),e("a",V,[i("768-v-ema.ckpt"),a(n)]),i(")")]),e("li",null,[e("a",j,[i("Stable Diffusion 2.1"),a(n)]),i(" ("),e("a",U,[i("v2-1_768-ema-pruned.ckpt"),a(n)]),i(")")])]),e("p",null,[i("不过本人跟倾向于在"),e("a",E,[i("Civitai"),a(n)]),i("上下面下载各种模型。")]),O,P,W,e("p",null,[i("我们找一个下载量最高的模型"),e("a",B,[i("ChilloutMix"),a(n)]),i("进行下载，抖音 AI 小姐姐大多数都是基于这个模型生成的。点击页面上的"),q,i("按钮进行下载。")]),G,e("p",null,[i("大家可以通过输入 Prompt 提示词，以便 AI 可以绘制出你想要的图片。为了避免某些绘制问题，可以在 Negative prompt 反提示词中输入关键词。提示词最好都是用英文，不然绘制出来的画会牛头不对马尾。如果你想不出啥提示词，可以在"),e("a",R,[i("Civitai"),a(n)]),i("上找到自己喜欢的图片风格，复制图片上的提示词即可，然后点击生存按钮即可。")]),F])}const X=r(p,[["render",$],["__file","mac-deploy-stable-diffusion-web-ui.html.vue"]]);export{X as default};
